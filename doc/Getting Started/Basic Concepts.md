# Basic Concepts

## Near Realtime (NRT)

Elasticsearch是一个**近实时**搜索平台。
这意味着从索引文档到文档可被搜索的所花费的时间仅有一点延迟（通常是一秒）。

## Cluster

集群是一个或多个节点（服务器）的集合，它们共同保存您的所有数据，并提供跨所有节点的联合索引和搜索功能。
**群集由唯一名称标识**，默认情况下为“elasticsearch”。
此名称很重要，因为节点只能通过集群的名字加入到集群, 成为群集的一部分。

确保不要在不同的环境中重用相同的群集名称，否则最终会导致节点加入错误的群集。 
例如，您可以将logging-dev，logging-stage和logging-prod用于开发环境，预生产环境和生产环境的集群。

请注意，拥有一个只包含单个节点的集群是完全正常的。
此外，您还可以拥有多个独立的集群，每个集群都有自己唯一的集群名称。

## Node

节点是作为群集一部分的单个服务器，存储数据并参与群集的索引和搜索功能。
与集群一样，节点由名称标识，默认情况下，该名称是在启动时分配给节点的随机通用唯一标识符（UUID）。
如果不需要默认值，可以自定义所需的任何节点名称。节点名称对集群管理非常重要，您可以在其中识别网络中的哪些服务器与Elasticsearch集群中的哪些节点相对应。

通过配置, 可以将节点加入到指定名称的集群中。
默认情况下，节点会加入到名为elasticsearch的集群，
这意味着如果在你的网络上启动了多个节点, 并且假设它们可以相互发现 - 它们将自动加入到名为elasticsearch的集群中。

在一个群集中，可以拥有任意数量的节点。此
外，如果网络上没有其他正在运行的Elasticsearch节点，
则默认情况下启动单个节点将形成名为elasticsearch的单节点集群。

## Index

索引是具有某些类似特征的文档集合。 
例如，您可以拥有客户数据的索引，产品目录的另一个索引以及订单数据的另一个索引。 
索引由名称标识（必须全部为**小写**），通过它对其中的文档执行索引，搜索，更新和删除操作。

在单个群集中，您可以根据需要定义任意数量的索引。

## Type

**WARNING**: **在6.0.0中被废弃**, 请参阅[Removal of mapping types][]

一种类型，曾经是索引的逻辑类别/分区，允许您在同一索引中存储不同类型的文档，
例如 一种用户类型，另一种用于博客帖子。 
但从现在已经不能在索引中创建多个类型，并且将在更高版本中删除类型的这个概念。
请参阅[Removal of mapping types][]以获取更多信息。

## Document

文档是可以进行索引的基本信息单元。 
例如，您可以为单个客户提供文档，为单个产品提供另一个文档，为单个订单提供另一个文档。 
该文档以JSON（JavaScript Object Notation）表示，JSON是一种普遍存在的互联网数据交换格式。

在索引/类型中，您可以根据需要存储任意数量的文档。 
请注意，尽管文档实际上位于索引中，但实际上必须将文档编入索引/分配给索引中的类型。

## Shards & Replicas

索引可能存储大量可能超过单个节点的硬件限制的数据。 
例如，占用1TB磁盘空间的十亿个文档的单个索引可能不适合单个节点的磁盘，或者可能太慢而无法单独从单个节点提供搜索请求。

为了解决这个问题，Elasticsearch提供了将索引细分为多个称为分片(shard)的功能。 
创建索引时，只需定义所需的分片数即可。 每个分片本身都是一个功能齐全且独立的“索引”，可以托管在集群中的任何节点上。

分片很重要，主要有两个原因：

- 它允许对内容进行水平分割/水平缩放
- 它允许您跨分片（可能在多个节点上）的并行化操作，从而提高性能/吞吐量

如何对分片进行分布存储, 以及如何将文档聚合来响应搜索请求的机制完全由Elasticsearch管理，对用户是透明的。

在任何时候都可以预期出现故障的网络/云环境中，非常有用，
强烈建议使用故障转移机制，以防分片/节点以某种方式脱机或因任何原因消失。 
为此，Elasticsearch允许您将索引的分片的一个或多个副本制作成所谓的副本分片或简称副本(replica)。

副本很重要，主要有两个原因：

- 它在分片/节点出现故障时提供高可用性。 因此，请务必注意，副本分片永远不会被分配在源分片/主分片所在的节点上。
- 它允许您扩展搜索量/吞吐量，因为可以在所有副本上并行执行搜索。

总而言之，每个索引可以拆分为多个分片。 索引可以不被复制, 也可以被复制多次。 
复制后，每个索引都将具有主分片（被复制的源分片）和副本分片（主分片的副本）。

在创建索引时可以为每个索引定义分片和副本的数量。 
创建索引后，您还可以随时动态更改副本数。 
您可以使用_shrink和_split API更改现有索引的分片数，
但这不是一项简单的任务，预先计划正确数量的分片是最佳方法。

默认情况下，Elasticsearch中的每个索引都分配了5个主分片和1个副本，
这意味着如果群集中至少有两个节点，则索引将包含5个主分片和另外5个副本分片（1个完整副本），总计为每个索引10个分片。

**NOTE**: 每个Elasticsearch分片都是Lucene索引。
单个Lucene索引都有最大文档数。 截至LUCENE-5843，限制为2,147,483,519（= Integer.MAX_VALUE - 128）个文件。 
您可以使用_cat / shards API监视分片大小。

有了这个，让我们开始有趣的部分......

---
[Removal of mapping types]: https://www.elastic.co/guide/en/elasticsearch/reference/current/removal-of-types.html